extend ../layout/layout
block header
  header
    nav(class="bg-white border-gray-200 px-4 lg:px-6 py-2.5 dark:bg-gray-800")
      .flex.flex-wrap.justify-between.items-center.mx-auto.max-w-screen-xl
        a(href="https://flowbite.com" class="flex items-center")
          img(src="https://flowbite.com/docs/images/logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo")
          span.self-center.text-xl.font-semibold.whitespace-nowrap.dark Flowbite
        .flex.items-center.lg
          a(href="#" class="text-gray-800 dark:text-white hover:bg-gray-50 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 dark:hover:bg-gray-700 focus:outline-none dark:focus:ring-gray-800") Log in
          a(href="#" class="text-white bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800") Get started
          button(data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="mobile-menu-2" aria-expanded="false")
            span.sr-only Open main menu
            svg.w-6.h-6(fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current")
              path(fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd")
            svg.hidden.w-6.h-6(fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" class="fill-current")
              path(fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293-4.293a1 1 0 01-1.414-1.414z" clip-rule="evenodd")
      .hidden.justify-between.items-center.w-full.lg.flex.lg.w-auto.lg.order-1(id="mobile-menu-2")
        ul.flex.flex-col.mt-4.font-medium.lg.flex-row.lg.space-x-8.lg.mt-0
          li
            a(href="#" class="block py-2 pr-4 pl-3 text-white rounded bg-primary-700 lg:bg-transparent lg:text-primary-700 lg:p-0 dark:text-white" aria-current="page") Home
          li
            a(href="#" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700") Company
          li
            a(href="#" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700") Marketplace
          li
            a(href="#" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700") Features
          li
            a(href="#" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700") Team
          li
            a(href="#" class="block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 lg:hover:bg-transparent lg:border-0 lg:hover:text-primary-700 lg:p-0 dark:text-gray-400 lg:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white lg:dark:hover:bg-transparent dark:border-gray-700") Contact
block content
  .flex.justify-center.items-center.min-h-screen.bg-gray-100
    .w-full.max-w-5xl.bg-white.shadow-md.rounded-lg.p-6
      .flex.justify-between.items-center.mb-4
        h2.text-2xl.font-bold.text-gray-800 Table Title
        .flex.space-x-4
          button(class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" onclick="showAddNewModal()") Add New
          button(class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded" onclick="editRow()") Edit
      table.table-auto.w-full
        thead
          tr
            th # 
            th Name
            th Handle
            th Actions
        tbody
          each user, index in data
            tr
              th.text-center(scope='row')= user.id
              td.text-center= user.name
              td.text-center= user.handle ? user.handle : "N/A"
              td.text-center
                .flex.space-x-2.text-center.justify-center
                  button(class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-2 rounded" onclick=`showEditModal(${user.id}, '${user.name}')`) Edit
                  button(class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded" onclick=`deleteUser(${user.id})`) Delete

  // Modal structure
  .fixed.z-10.inset-0.overflow-y-auto.hidden(id="modal")
    .flex.items-center.justify-center.min-h-screen.p-4.text-center.sm.block.sm.p-0
      .fixed.inset-0.transition-opacity
        .absolute.inset-0.bg-gray-500.opacity-75
      .inline-block.bg-white.rounded-lg.overflow-hidden.shadow-xl.transform.transition-all.sm.max-w-lg.sm.w-full
        form(id="modalForm")
          .bg-white.px-4.pt-5.pb-4.sm.p-6.sm.pb-4
            .sm.flex.sm.items-start
              .mt-3.text-center.sm.mt-0.sm.text-left
                h3.text-lg.leading-6.font-medium.text-gray-900 Modal Title
                .mt-2
                  label(for="userId") User ID.
                  input#userId(type="text" name="id" class="mt-1 block w-full" required)
                  label(for="userName" class="mt-4") Name.
                  input#userName(type="text" name="name" class="mt-1 block w-full" required)
          .bg-gray-50.px-4.py-3.sm.px-6.sm.flex.sm.flex-row-reverse
            button(type="submit" class="w-full.inline-flex.justify-center.rounded-md.border.border-transparent.shadow-sm.px-4.py-2.bg-blue-600.text-base.font-medium.text-white.hover:bg-blue-700.focus:outline-none.focus:ring-2.focus:ring-offset-2.focus:ring-blue-500.sm:ml-3.sm:w-auto.sm:text-sm") Save
            button(type="button" class="mt-3.w-full.inline-flex.justify-center.rounded-md.border.border-gray-300.shadow-sm.px-4.py-2.bg-white.text-base.font-medium.text-gray-700.hover:text-gray-500.focus:outline-none.focus:ring-2.focus:ring-offset-2.focus:ring-indigo-500.sm:mt-0.sm:w-auto.sm:text-sm" onclick="hideModal()") Cancel

block script 
  script.
    function showAddNewModal() {
      document.getElementById('modal').classList.remove('hidden');
      document.getElementById('modalForm').setAttribute('action', '/data');
      document.getElementById('modalForm').method = 'POST';
      document.getElementById('modalForm').reset();
      document.querySelector('.text-lg').innerText = 'Add New User';
    }

    function showEditModal(id, name) {
      document.getElementById('modal').classList.remove('hidden');
      document.getElementById('modalForm').setAttribute('action', '/data/' + id);
      document.getElementById('modalForm').method = 'PUT';
      document.getElementById('userId').value = id;
      document.getElementById('userName').value = name;
      document.querySelector('.text-lg').innerText = 'Edit User';
    }

    function hideModal() {
      document.getElementById('modal').classList.add('hidden');
    }

    function editRow() {
      alert('Edit Row');
    }

    function deleteUser(id) {
      if (confirm('Are you sure you want to delete this user?')) {
        fetch('/data/' + id, {
          method: 'DELETE',
        }).then(response => {
          if (response.ok) {
            location.reload();
          } else {
            console.log(response);
            alert('Failed to delete user');
          }
        });
      }
    }